I dette afsnit vil vi definere Riemann-integralet.\footnote{Afsnittet er primært baseret på \cite{Abbott2002}, s. 183-194}
Det skal dog bemærkes, at vi ikke benytter Riemanns originale definition, men derimod en videreudvikling af den franske matematiker Darboux.
Det kan bevises, at de to definitioner på integralet er ækvivalente.\footnote{\cite{Bartle2010}, s. 231-232.}

\subsection{Inddelinger samt over- og undersummer}%
  \label{sub:Inddelinger samt over- og undersummer}

Vi starter med nogle grundlæggende definitioner, vi har brug for til at definere integralet.
\begin{definition}{Inddeling}{}
  Antag $a,\;b \in \mathbb{R}$ sådan at $a <b$.
  Ved en inddeling $P$ af $[a;b]$ forstår vi en endelig mængde $\{x_0,\dotsc, x_n\}$, hvor
  \[
  a=x_0<x_1<\cdots<x_n=b,
  \] 
  og vi skriver 
  \[
  \Delta x_i=x_i-x_{i-1} \quad (i=1,\ldots ,n).
  \]  
\end{definition}
Med en inddeling kan vi dele intervallet $[a;b]$ op i $n$ delintervaller, hvor det $i$'te delinterval har længden $\Delta x_i$:
\[
[a;b]=[x_0;x_1] \cup [x_1;x_2]\cup \cdots \cup [x _{n-1};x_n].
\] 
Vi vil nu definere over- og undersummen af en funktion med hensyn til en given inddeling.

\begin{definition}{Over- og undersum}{}
  Antag $f:[a;b] \to \mathbb{R}$ er en begrænset funktion, og $P=\{x_0,\ldots, x_n\}$ er en inddeling af $[a;b]$. 
  Lad 
  \[
  M_i=\sup \{ f(x):x \in [x _{x_{i-1}};x_i] \} \quad{\text{og}} \quad m_i=\inf \{ f(x):x \in [x _{x_{i-1}};x_i] \}.
  \] 
  Så er oversummen af $f$ med hensyn til $P$ defineret ved
  \[
  U(f, P)=\sum_{i=1}^{n} M_i \Delta x_i.
  \] 
  Tilsvarende er undersummen af $f$ med hensyn til $P$ defineret ved
  \[
  L(f, P)=\sum_{i=1}^{n} m_i \Delta x_i.
  \] 
\end{definition}

Vi kræver i definitionen, at $f(x)$ er begrænset, da vi så fra supremum- og infimum-egenskaben (sætning \ref{theo:supremum-egenskab} og \ref{theo:infimum-egenskab}) ved, at $M_i$ og $m_i$ eksisterer. 

\begin{theorem}[label=theo:ulighed_overundersum]{Uligheder med over- og undersummer}{}
  Antag $f:[a;b] \to \mathbb{R}$ er en begrænset funktion og $P$ og $P'$ er inddelinger af $[a;b]$ sådan at $P \subseteq P'$. Så gælder
  \[
  L(f, P)\leq L(f, P') \leq  U(f, P') \leq U(f, P).
  \] 
\end{theorem}
\begin{proof} 
  \footnote{Beviset er baseret på \cite{Axler2020}, s. 3-4.} 
  Lad $P=\{ x_0,\ldots , x_n \} $ og $P'=\{x_0',\ldots x_N'\}$. 
  Siden $P \subseteq P'$, så har vi, at for hver $j=1,\ldots , n$ eksisterer $k \in \{ 0,\ldots , N-1 \} $ og $m \in \mathbb{Z}^+$ sådan at $x _{j-1} =x_k'< \cdots < x _{k+m}'=k_j$.

  Så gælder for hver $i=1, \ldots , m$, at ${\{ f(x):x \in [x'_{k+i-1};x'_{k+i }] \} \subseteq \{ f(x):x \in [x_{j-1},x_j]\}  }$, og 
  \begin{equation*}
  \begin{split}
   m_j&=\inf \{ f(x):x \in [x_{j-1};x_j]\} \\
    &\leq  \inf \{ f(x):x \in [x'_{k+i-1};x'_{k+i }] \}\\
    &=m'_{k+i}.
  \end{split}
  \end{equation*}
Vi får så uligheden 
\begin{equation*}
\begin{split}
  m_j \Delta x_j&=\sum_{i=1}^{m} m_j \Delta x _{k+i}\\
  &\leq \sum_{i=1}^{m} m' _{k+i} \Delta x _{k+i}.
\end{split}
\end{equation*}
  Det følger, at $L(f, P) \leq L(f, P')$. 

  Tilsvarende har vi for hver $i=1,\ldots, m$ også, at
  \begin{equation*}
  \begin{split}
    M_j&=\sup \{ f(x):x \in [x_{j-1};x_j] \} \\
    &\geq \sup \{ f(x):x \in [x'_{k+i-1};x'_{k+i}] \} \\
    &=M'_{k+i},
  \end{split}
  \end{equation*}
  og vi får uligheden
  \begin{equation*}
  \begin{split}
  M_j \Delta x_j&=\sum_{i=1}^{m} M_j \Delta x _{k+i}\\
  &\leq \sum_{i=1}^{m} M' _{k+i} \Delta x _{k+i}.
  \end{split}
  \end{equation*}
  Det følger, at $U(f, P) \geq U(f, P')$.

  Siden infimum af en mængde altid er mindre end eller lig med supremum af mængden, så må der til sidst også gælde, at $L(f, P')\leq U(f, P')$.
\end{proof}

 Sætning \ref{theo:ulighed_overundersum} fortæller, at når vi tilføjer ekstra punkter til en inddeling så bliver undersummen potentielt større, og oversummen bliver potentielt mindre.
 Figur \ref{fig:ulighed_overundersum} tydeliggør i høj grad ideen i beviset.

\begin{figure}[H]
\begin{center}
\begin{tikzpicture}[scale=1.6, transform shape]
\begin{axis}[xmin=0, xmax=3, ymin=-0.5, ymax=8, axis lines=middle,
  xlabel=$x$,ylabel=$y$,
  xtick={0.5,1.2,2.5},
  xticklabels={$x _{j-1}=x'_{k}$, $x'_{k+1}$, $x_j=x'_{k+m}$},
  xticklabel style={anchor=north, font=\footnotesize},
  ytick={6.3824,5},
  yticklabels={$m'_{k+1}$, $m_j$},
  every major tick/.append style={thick, major tick length=5pt, black},
  yticklabel style={anchor=east, font=\footnotesize}
  ]
  \addplot[color=red, domain=0:3, samples=100, thick]{-(x-2)^4 - (x-2)^3 + 2*(x-2)^2+5} node[above=5pt, pos=0.7] {$f$};
  \filldraw[gray!20] (axis cs:0.5,0.02) rectangle (axis cs:2.5,5);
  \filldraw[cyan!20] (axis cs:0.5,5) rectangle (axis cs:1.2,6.3824);
  \draw[color=blue, dashed] (axis cs:0.5,0) -- (axis cs:0.5,6.3824);
  \draw[color=blue, dashed] (axis cs:0,6.3824) -- (axis cs:1.2,6.3824);
  \draw[color=gray, dashed] (axis cs:2.5,0) -- (axis cs:2.5,5);
  \draw[color=gray, dashed] (axis cs:0,5) -- (axis cs:2.5,5);
  \draw[color=blue, dashed] (axis cs:1.2,0) -- (axis cs:1.2,6.3824);
\end{axis}
\end{tikzpicture}
\end{center}
  \caption{Ideen i beviset af sætning \ref{theo:ulighed_overundersum}}%
\label{fig:ulighed_overundersum}
\end{figure}

Det næste resultat viser, at der for en reel funktion med definitionsmængden $[a;b]$ gælder, at undersummen mht. enhver inddeling af $[a;b]$ altid er mindre end eller lig med oversummen mht. enhver inddeling af $[a;b]$.

\begin{theorem}[label=theo:undersum_leq_oversum]{Undersum $\leq $ oversum }{}
  Antag $f:[a;b] \to \mathbb{R}$ er en begrænset funktion og $P_1 $ og $P_2$ er inddelinger af $[a;b]$.
  Så gælder
  \[
  L(f, P_1) \leq U(f, P_2).
  \] 
\end{theorem}
\begin{proof} 
  Lad $P_3=P_1 \cup P_2$.
  Så har vi fra sætning \ref{theo:ulighed_overundersum}, at 
  \begin{equation*}
  \begin{split}
    L(f, P_1) &\leq L(f, P_3) \\
    &\leq U(f, P_3)\\
    &\leq U(f, P_2).
  \end{split}
  \end{equation*}
\end{proof}

\subsection{Integrabilitet}%
  \label{sub:Integrabilitet}

Vi har nu set, at når vi tilføjer ekstra punkter til en inddeling så bliver undersummen potentielt større, og oversummen bliver potentielt mindre.
Derudover er en undersum for en funktion altid mindre end en oversum, uanset mht. hvilken inddeling.
Mængden af alle oversummer er så opad begrænset og mængden af alle undersummer er så nedad begrænset. 
Derfor eksisterer supremum for mængden af alle oversummer og ligeledes eksisterer infimum for mængden af alle undersummer.
Vi definerer det såkaldte øvre integral og nedre integral ud fra dette faktum.

\begin{definition}[label=def:øvre_nedre_integral]{Øvre integral, nedre integral}{}
  Antag $f:[a;b] \to \mathbb{R}$ er en begrænset funktion, og lad $\mathfrak{P}$ være mængden af alle inddelinger af $[a;b]$.
  Så er det øvre integral af $f$ defineret ved
  \[
  \upint_{a}^{b} f = \inf \{ U(f, P):P \in \mathfrak{P} \}.
  \] 
  Tilsvarende er det nedre integral af $f$ defineret ved
  \[
  \lowint_{a}^{b} f = \sup \{ L(f, P):P \in \mathfrak{P} \}.
  \] 
\end{definition}

Det viser sig, at det nedre integral for en funktion altid er mindre end eller lig det øvre intagral for funktionen.

\begin{theorem}[label=theo:Nedre_int_leq_øvre_int]{Nedre integral $\leq$ øvre integral }{}
  Antag $f:[a;b] \to \mathbb{R}$ er en begrænset funktion. 
  Så gælder
  \[
  \lowint_{a}^{b} f \leq \upint_{a}^{b} f  
  \]
\end{theorem}
\begin{proof} 
  Fra sætning \ref{theo:undersum_leq_oversum} har vi, at $L(f,P_1) \leq U(f,P_2) \text{ for alle }P_1, P_2 \in \mathfrak{P}$.
  Fra definitionen af supremum (def. \ref{def:sup}) følger det så, at 
\begin{equation*}
\begin{split}
  \lowint_{a}^{b} f &= \sup \{ L(f, P) : P \in \mathfrak{P}\} \\
  &\leq U(f, P_2),
\end{split}
\end{equation*}
  hvor $P_2 \in \mathfrak{P}$.
  $\lowint_{a}^{b} f $ er da et undertal for mængden $\{ U(f, P): P \in \mathfrak{P}\} $, og siden infimum af en mængde altid er større end eller lig ethvert undertal for mængden, så har vi
  \begin{equation*}
  \begin{split}
    \lowint_{a}^{b} f &\leq \inf \{ U(f, P): P \in \mathfrak{P} \} \\
    &=\upint_{a}^{b} f.  
  \end{split}
  \end{equation*}
\end{proof}

Ved Riemann-integration arbejder vi kun med funktioner, hvor det øvre og nedre integral har en fælles værdi.

\begin{definition}[label=def:integrabel]{Integrabel, integral}{}
  Antag $f:[a;b] \to \mathbb{R}$ er en begrænset funktion. 
  Så er $f$ integrabel, hvis
  \[
  \lowint_{a}^{b} f = \upint_{a}^{b} f,   
  \] 
  og denne fælles værdi kaldes for integralet af $f$ fra $a$ til $b$, som denoteres 
  \[
  \int_{a}^{b} f \text{ eller }  \int_{a}^{b} f(x) \,dx.
  \] 
\end{definition}

Det er imidlertid lidt vanskeligt at bevise, om en funktion er integrabel eller ej alene ud fra denne definition.

